{"ast":null,"code":"import _regeneratorRuntime from\"/Users/drwin/Downloads/Websites/Frontend/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/drwin/Downloads/Websites/Frontend/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/drwin/Downloads/Websites/Frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{useLocation}from\"react-router\";import{userRequest}from\"../requestMethods\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Success=function Success(){var location=useLocation();//in Cart.jsx I sent data and cart. Please check that page for the changes.(in video it's only data)\nvar data=location.state.stripeData;var cart=location.state.cart;var currentUser=useSelector(function(state){return state.user.currentUser;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),orderId=_useState2[0],setOrderId=_useState2[1];useEffect(function(){var createOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userRequest.post(\"/orders\",{userId:currentUser._id,products:cart.products.map(function(item){return{productId:item._id,quantity:item._quantity};}),amount:cart.total,address:data.billing_details.address});case 3:res=_context.sent;setOrderId(res.data._id);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function createOrder(){return _ref.apply(this,arguments);};}();data&&createOrder();},[cart,data,currentUser]);return/*#__PURE__*/_jsxs(\"div\",{style:{height:\"100vh\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\"},children:[orderId?\"Order has been created successfully. Your order number is \".concat(orderId):\"Successfull. Your order is being prepared...\",/*#__PURE__*/_jsx(\"button\",{style:{padding:10,marginTop:20},children:\"Go to Homepage\"})]});};export default Success;","map":{"version":3,"names":["useEffect","useState","useSelector","useLocation","userRequest","Success","location","data","state","stripeData","cart","currentUser","user","orderId","setOrderId","createOrder","post","userId","_id","products","map","item","productId","quantity","_quantity","amount","total","address","billing_details","res","height","display","flexDirection","alignItems","justifyContent","padding","marginTop"],"sources":["/Users/drwin/Downloads/Websites/Frontend/client/src/pages/Success.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router\";\nimport { userRequest } from \"../requestMethods\";\n\nconst Success = () => {\n  const location = useLocation();\n  //in Cart.jsx I sent data and cart. Please check that page for the changes.(in video it's only data)\n  const data = location.state.stripeData;\n  const cart = location.state.cart;\n  const currentUser = useSelector((state) => state.user.currentUser);\n  const [orderId, setOrderId] = useState(null);\n\n  useEffect(() => {\n    const createOrder = async () => {\n      try {\n        const res = await userRequest.post(\"/orders\", {\n          userId: currentUser._id,\n          products: cart.products.map((item) => ({\n            productId: item._id,\n            quantity: item._quantity,\n          })),\n          amount: cart.total,\n          address: data.billing_details.address,\n        });\n        setOrderId(res.data._id);\n      } catch {}\n    };\n    data && createOrder();\n  }, [cart, data, currentUser]);\n\n  return (\n    <div\n      style={{\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n    >\n      {orderId\n        ? `Order has been created successfully. Your order number is ${orderId}`\n        : `Successfull. Your order is being prepared...`}\n      <button style={{ padding: 10, marginTop: 20 }}>Go to Homepage</button>\n    </div>\n  );\n};\n\nexport default Success;\n"],"mappings":"+ZAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,WAAW,KAAQ,cAAc,CAC1C,OAASC,WAAW,KAAQ,mBAAmB,CAAC,wFAEhD,GAAMC,QAAO,CAAG,QAAVA,QAAO,EAAS,CACpB,GAAMC,SAAQ,CAAGH,WAAW,EAAE,CAC9B;AACA,GAAMI,KAAI,CAAGD,QAAQ,CAACE,KAAK,CAACC,UAAU,CACtC,GAAMC,KAAI,CAAGJ,QAAQ,CAACE,KAAK,CAACE,IAAI,CAChC,GAAMC,YAAW,CAAGT,WAAW,CAAC,SAACM,KAAK,QAAKA,MAAK,CAACI,IAAI,CAACD,WAAW,GAAC,CAClE,cAA8BV,QAAQ,CAAC,IAAI,CAAC,wCAArCY,OAAO,eAAEC,UAAU,eAE1Bd,SAAS,CAAC,UAAM,CACd,GAAMe,YAAW,4FAAG,mLAEEX,YAAW,CAACY,IAAI,CAAC,SAAS,CAAE,CAC5CC,MAAM,CAAEN,WAAW,CAACO,GAAG,CACvBC,QAAQ,CAAET,IAAI,CAACS,QAAQ,CAACC,GAAG,CAAC,SAACC,IAAI,QAAM,CACrCC,SAAS,CAAED,IAAI,CAACH,GAAG,CACnBK,QAAQ,CAAEF,IAAI,CAACG,SACjB,CAAC,EAAC,CAAC,CACHC,MAAM,CAAEf,IAAI,CAACgB,KAAK,CAClBC,OAAO,CAAEpB,IAAI,CAACqB,eAAe,CAACD,OAChC,CAAC,CAAC,QARIE,GAAG,eASTf,UAAU,CAACe,GAAG,CAACtB,IAAI,CAACW,GAAG,CAAC,CAAC,iJAE5B,kBAbKH,YAAW,0CAahB,CACDR,IAAI,EAAIQ,WAAW,EAAE,CACvB,CAAC,CAAE,CAACL,IAAI,CAAEH,IAAI,CAAEI,WAAW,CAAC,CAAC,CAE7B,mBACE,aACE,KAAK,CAAE,CACLmB,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAClB,CAAE,WAEDrB,OAAO,qEACyDA,OAAO,gDACtB,cAClD,eAAQ,KAAK,CAAE,CAAEsB,OAAO,CAAE,EAAE,CAAEC,SAAS,CAAE,EAAG,CAAE,4BAAwB,GAClE,CAEV,CAAC,CAED,cAAe/B,QAAO"},"metadata":{},"sourceType":"module"}